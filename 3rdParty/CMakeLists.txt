CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

IF (NOT CMAKE_BUILD_TYPE)
    SET(CMAKE_BUILD_TYPE "debug")
ENDIF (NOT CMAKE_BUILD_TYPE)

LIST(APPEND POSSIBLE_BUILD_TYPE "debug" "release")
LIST(FIND POSSIBLE_BUILD_TYPE ${CMAKE_BUILD_TYPE} POS)

IF (${POS} EQUAL "-1")
    MESSAGE(FATAL_ERROR "only support build type : ${POSSIBLE_BUILD_TYPE}")
ENDIF (${POS} EQUAL "-1")

IF (${CMAKE_SYSTEM_PROCESSOR} MATCHES "x86_64")
    SET(Architecture "x86")
ELSE (${CMAKE_SYSTEM_PROCESSOR} MATCHES "x86_64")
    SET(Architecture "x64")
ENDIF (${CMAKE_SYSTEM_PROCESSOR} MATCHES "x86_64")

MESSAGE(STATUS "build type : ${CMAKE_BUILD_TYPE}")
MESSAGE(STATUS "architecture : ${Architecture}")

ADD_SUBDIRECTORY(boost)
ADD_SUBDIRECTORY(libpgsql)
ADD_SUBDIRECTORY(libcutl)
ADD_SUBDIRECTORY(libodb)
ADD_SUBDIRECTORY(libodb-boost)
ADD_SUBDIRECTORY(libodb-pgsql)